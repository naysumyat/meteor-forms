<template name="form">
  {{#unless hidden}}
    <form id="{{name}}_form" class="{{classes}}{{#if loading}} loading{{/if}}">
      <div class="form-{{layout}}">
        {{> notice notice}}
        {{inputs}}
        {{actions}}
      </div>
    </form>  
  {{/unless}}
</template>

<template name="notice">
  {{#if success}}
    <div class="alert alert-success">{{success}}</div>
  {{/if}}
  
  {{#if errors}}
    {{#if showErrorDetails}}
      <div class="alert alert-error">{{errors/reason}}</div>
    {{else}}
      <div class="alert alert-error alert-block">
        <a class="close" data-dismiss="alert" href="#">Ã—</a>
        <h4 class="alert-heading">{{errors/reason}}</h4>
        <ul>
          {{#each errors/detailList}}
            <li>{{this}}</li>
          {{/each}}
        </ul>
      </div>
    {{/if}}
  {{/if}}
</template>

<template name="fieldsets">
  {{#each fieldsets}}
    <fieldset>
      <legend>{{name}}</legend>
      {{> inputs}}
    </fieldset>
  {{/each}}
</template>

<template name="inputs">
  {{#each inputs}}
    {{input}}
  {{/each}}
</template>

<template name="blockActions">
  <div class="form-actions">
    {{> actions}}
  </div>
</template>

<template name="inlineActions">
  <span class="{{#if inlineFormActions}}inline-form-actions{{/if}}">
    {{> actions}}
    <span class="spinner" />
  </span>
</template>

<template name="actions">
  {{#each actions}}
    {{> action}}
  {{/each}}
</template>

<template name="action">
  <button data-name="{{name}}" class="btn {{name}}Action {{classes}}" name="{{name}}"{{#if form/loading}} disabled="disabled"{{/if}}>{{label}}</button>
</template>

<template name="errors">
  {{#if errors}}
    <p class="input-error help-block">
      {{#each errors}}
        <!-- TODO Everything breaks if a block level element is used. This fixes things for now -->
        <span class="blockfix"><em>{{this}}</em></span>
      {{/each}}
    </p>
  {{/if}}
</template>
